..
    This file is part of Invenio.
    Copyright (C) 2020 CERN.

    Invenio is free software; you can redistribute it and/or modify it
    under the terms of the MIT License; see LICENSE file for more details.

Version 3.3.0
=============

*Released 2020-05-18*

We are proud to announce the release of Invenio v3.3.0.

**Python compatibility**

Invenio v3.3 supports Python versions 3.6 and 3.7. Python 2 support in Invenio
ended on January 1st, 2020 with the official end of life for Python 2 on the
same date.

Getting started
---------------

See our :ref:`quickstart` guide.

What's new in Invenio v3.3?
---------------------------

Python 3.7
~~~~~~~~~~

Invenio v3.3 Python 3.7 is supported!

Single Page Applications
~~~~~~~~~~~~~~~~~~~~~~~~

Invenio-OAuthClient adds new RESTful endpoints, so it can be used via REST
only. These enables SPA applications to use it and integrate a login flow
through package's oauth providers i.e cern, github, orcid, globus.

Accounts REST API
~~~~~~~~~~~~~~~~~

CSRF Protection
~~~~~~~~~~~~~~~
Invenio-REST adds a CSRF middleware, called `CSRFProtectMiddlewate` to protect
API views against CSRF attacks. The CSRF checks can be skipped in REST API
calls when using a personal OAuth API token.

Dependency management
~~~~~~~~~~~~~~~~~~~~~

To efficiently manage 3rd-party dependenceis, i.e. Python packages that are not
part of the `inveniosoftware` GitHub organization, the concept of "coordinator"
modules is introduced. These are core Invenio modules that are responsible for
properly specifying 3rd-party dependencies.

Here's a table of all the current coordinator modules:

=================== ==================================================================================================================
 Module             Dependencies
=================== ==================================================================================================================
 `invenio-base`     `Flask`, `werkzeug`, `six`, `blinker`
 `invenio-accounts` `Flask-Security`, `Flask-KVSession`, `Flask-Login`
 `invenio-admin`    `Flask-Admin`
 `invenio-celery`   `celery`, `kombu`, `msgpack`
 `invenio-rest`     `webargs`, `marshmallow`
 `invenio-i18n`     `Flask-BabelEx`
 `invenio-db`       `Flask-SQLAlchemy`, `Flask-Alembic`, `SQLAlchemy`, `SQLAlchemy-Continuum`, `SQLAlchemy-Utils`, `psycopg2`, `pymysql`
 `invenio-search`   `elasticsearch`, `elasticsearch-dsl`
 `pytest-invenio`   `pytest`, `coverage`, `isort`, `check-manifest`
=================== ==================================================================================================================

Helm chart (BETA)
~~~~~~~~~~~~~~~~~~
Helm-Invenio provides a helm chart to deploy an Invenio application along with
all its required services: Redis, RabbitMQ, HAProxy, Nginx, Elasticsearch,
Logstash and PostgreSQL.

This chart is currently in beta version. Its templates are currently specific
for OpenShift. However, work is on-going to support bare Kubernetes deployments.

Minor changes in v3.3
---------------------
- Invenio-Access: adds `explicit excludes`. It enables to deny an specific
  need or role.
- Invenio-Celery: fixes the rate limiting during celery task

Deprecations in v3.3
--------------------


Features removed in v3.3
------------------------

- Support for Elasticsearch 2

Maintenance policy
------------------

Invenio v3.3 will be supported with bug and security fixes until the release of
Invenio v3.5 and minimum until 2021-05-18.

See our :ref:`maintenance-policy`.

What's next?
------------
In Invenio v3.4 we are planning to release the **Statistics** bundle including:

- `invenio-stats <https://invenio-stats.readthedocs.io>`_
    - Invenio module for statistical data processing and querying with support
      for collecting COUNTER Research Data Usage Metrics compliant statistics.
- `counter-robots <https://counter-robots.readthedocs.io>`_
    - Library for COUNTER-compliant detection of machines and robots.

In addition to the Statistics bundle, we will also release final versions of
the following two modules:

- `invenio-index-migrator <https://invenio-index-migrator.readthedocs.io>`_
    - Elasticsearch index migrator for Invenio (aka zero down-time reindexing
      and index migration).
