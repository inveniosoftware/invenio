# -*- coding: utf-8 -*-
##
## This file is part of Invenio.
## Copyright (C) 2015 CERN.
##
## Invenio is free software; you can redistribute it and/or
## modify it under the terms of the GNU General Public License as
## published by the Free Software Foundation; either version 2 of the
## License, or (at your option) any later version.
##
## Invenio is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
## General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with Invenio; if not, write to the Free Software Foundation, Inc.,
## 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.

@extend
location:
    creator:
        @legacy((("852", "852__", "852__%"), ""),
                ("852__a", ""))
        marc, "852__", value['a']
    producer:
        json_for_marc(), {"852__a": ""}

@extend
email:
    creator:
        @legacy((("856", "8560_", "8560_%"), ""),
                ("8560_f", "email"))
        marc, "856._", value['f']
    producer:
        json_for_marc(), {"f": ""}

@extend
email_message:
    creator:
        @legacy((("859", "859__", "859__%"), ""),
                ("859__a","contact"),
                ("859__f","address"),
                ("859__x","date"))
        marc, "859..", {'contact':value['a'], 'address':value['f'], 'date':value['x']}
    producer:
        json_for_marc(), {"a": 'contact',"f": 'address', "x": 'date'}

@extend
url:
    creator:
        @legacy((("856", "8564_", "8564_%"), ""),
                ("8564_a", "host_name"),
                ("8564_b", "access_number"),
                ("8564_c", "compression_information"),
                ("8564_d", "path"),
                ("8564_f", "electronic_name"),
                ("8564_h", "request_processor"),
                ("8564_i", "institution"),
                ("8564_q", "eformat"),
                ("8564_r", "settings"),
                ("8564_s", "file_size"),
                ("8564_u", "url", "url"),
                ("8564_x", "subformat"),
                ("8564_y", "caption", "description"),
                ("8564_z", "comment"))
        @only_if_master_value((not is_local_url(value['u']), ))
        marc, "8564.", {'host_name': value['a'],
                        'access_number': value['b'],
                        'compression_information': value['c'],
                        'path':value['d'],
                        'electronic_name': value['f'],
                        'request_processor': value['h'],
                        'institution': value['i'],
                        'eformart': value['q'],
                        'settings': value['r'],
                        'size': value['s'],
                        'url': value['u'],
                        'subformat':value['x'],
                        'description':value['y'],
                        'comment':value['z']}
    producer:
        json_for_marc(), {"a": "host_name", "b": "access_number", "c": "compression_information", "d": "path", "f": "electronic_name", "h": "request_processor", "i": "institution", "q": "eformat", "r": "settings", "s": "file_size", "u": "url", "x": "subformat", "y": "description", "z": "comment"}

@extend
fft:
    creator:
        @legacy((('FFT', 'FFT__', 'FFT__%'), ''),
                ("FFT__a", "path"),
                ("FFT__d", "description"),
                ("FFT__f", "eformat"),
                ("FFT__i", "temporary_id"),
                ("FFT__m", "new_name"),
                ("FFT__o", "flag"),
                ("FFT__r", "restriction"),
                ("FFT__s", "timestamp"),
                ("FFT__t", "docfile_type"),
                ("FFT__v", "version"),
                ("FFT__x", "icon_path"),
                ("FFT__z", "comment"),
                ("FFT__w", "document_moreinfo"),
                ("FFT__p", "version_moreinfo"),
                ("FFT__b", "version_format_moreinfo"),
                ("FFT__f", "format_moreinfo"))
        marc, "FFT__", {'path': value['a'],
                        'description': value['d'],
                        'eformat': value['f'],
                        'temporary_id': value['i'],
                        'new_name': value['m'],
                        'flag': value['o'],
                        'restriction': value['r'],
                        'timestamp': value['s'],
                        'docfile_type': value['t'],
                        'version': value['v'],
                        'icon_path': value['x'],
                        'comment': value['z'],
                        'document_moreinfo': value['w'],
                        'version_moreinfo': value['p'],
                        'version_format_moreinfo': value['b'],
                        'format_moreinfo': value['u']
                       }
        @only_if_master_value(is_local_url(value['u']))
        marc, "8564.", {'hots_name': value['a'],
                        'access_number': value['b'],
                        'compression_information': value['c'],
                        'path':value['d'],
                        'electronic_name': value['f'],
                        'request_processor': value['h'],
                        'institution': value['i'],
                        'formart': value['q'],
                        'settings': value['r'],
                        'file_size': value['s'],
                        'url': value['u'],
                        'subformat':value['x'],
                        'description':value['y'],
                        'comment':value['z']}
    producer:
        json_for_marc(), {"FFT__a": "path", "FFT__d": "description", "FFT__f": "eformat", "FFT__i": "temporary_id", "FFT__m": "new_name", "FFT__o": "flag", "FFT__r": "restriction", "FFT__s": "timestamp", "FFT__t": "docfile_type", "FFT__v": "version", "FFT__x": "icon_path", "FFT__z": "comment", "FFT__w": "document_moreinfo", "FFT__p": "version_moreinfo", "FFT__b": "version_format_moreinfo", "FFT__f": "format_moreinfo"}

@extend
electronic_location:
    creator:
        @legacy((('856', '8567_', '8567_%'), ''),
                ('8567_2', 'access_method'),
                ('8567_u', 'uri'))
        marc, "8567_", {'method':value['2'], 'path':value['d'], 'uri':value['u'], 'nonpublic_note':value['x'], 'link_test':value['y']}
    producer:
        json_for_marc(), {"u": "uri", "d": "path", "x": "nonpublic_note", "y": "link_test", "2": "method"}

