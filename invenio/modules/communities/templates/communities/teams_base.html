{#
# This file is part of Invenio.
# Copyright (C) 2013, 2014, 2015 CERN.
#
# Invenio is free software; you can redistribute it and/or
# modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of the
# License, or (at your option) any later version.
#
# Invenio is distributed in the hope that it will be useful, but
# WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Invenio; if not, write to the Free Software Foundation, Inc.,
# 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
#}

{%- from "communities/helpers.html" import community_panel_start  with context -%}
{%- from "communities/helpers.html" import community_panel_end  with context -%}
{%- from "communities/helpers.html" import searchbar  with context -%}

{% extends "page.html" %}

{% bundles "communities.js", "communities.css" %}

{% block body %}
{{ community_panel_start(
     active="teams",
     title="Teams",
     icon='fa fa-users',
     btn='New team', btn_icon='fa fa-fw fa-plus', btn_href=url_for('community_manage.teams_new', community_id=community.id)
   ) }}
<div class="panel-body" style="line-height: 25px;">
Teams give communities the ability to create groups of members and control level of permissions.
Team members can be granted read, write, or admin permissions to specific community.
</div>
{{ searchbar() }}
<table class="table table-hover">
  <thead>
    <tr>
      <th class="col-md-7">{{ _("Name") }}</th>
      <th class="col-md-1">{{ _("Members") }}</th>
      <th class="col-md-4"></th>
    </tr>
  </thead>
  <tbody>
    {%- for team in teams %}
    <tr data-href="{{ url_for('community_manage.teams_manage', community_id=community.id, team=team.usergroup.name) }}">
      <td>
        <div>
          <b>{{ team.usergroup.name }}</b>
          <a class="label label-admin">{{ team.team_rights }}</a>
        </div>
        <br>
        <small>{{ team.usergroup.description|truncate(200, True)|safe }}</small>
      </td>
      <td class="text-center vcenter">{{ team.usergroup.users|length }}</td>
      <td class="text-center btn-toolbar vcenter">
        <a class="btn btn-xs btn-default" href="{{ url_for('community_manage.teams_members', community_id=community.id, team=team.usergroup.name)}}">
          <i class="fa fa-fw fa-users"></i>{{ _("Members") }}
        </a>
        <a class="btn btn-xs btn-default" href="{{ url_for('community_manage.teams_manage', community_id=community.id, team=team.usergroup.name) }}">
          <i class="fa fa-fw fa-wrench"></i>{{ _("Manage") }}
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{# paginate() #}
{{ community_panel_end() }}
{% endblock %}
