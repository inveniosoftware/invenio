{#
## This file is part of Invenio.
## Copyright (C) 2014 CERN.
##
## Invenio is free software; you can redistribute it and/or
## modify it under the terms of the GNU General Public License as
## published by the Free Software Foundation; either version 2 of the
## License, or (at your option) any later version.
##
## Invenio is distributed in the hope that it will be useful, but
## WITHOUT ANY WARRANTY; without even the implied warranty of
## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
## General Public License for more details.
##
## You should have received a copy of the GNU General Public License
## along with Invenio; if not, write to the Free Software Foundation, Inc.,
## 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
#}
{% extends "workflows/admin_base.html" %}
{% import 'workflows/utils.html' as utils %}

{% block workflowbody %}

    <div class="row">
        <div class="col-md-12">
            <h3 class="modal-title" id="myModalLabel">{{ workflow_metadata.name }}</h3>
            <p>Owner: <strong>{{ workflow_metadata.uid }}</strong> | Creation date: <strong>{{ workflow_metadata.created }}</strong> | Last modification date: <strong>{{ workflow_metadata.modified }}</strong></p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
           Workflow definition:
           <div class="well">
               {{ utils.function_display(workflow_tasks, [-1]) }}
           </div>

            Workflow status
            <div class="well">
                <div id="workflow_preview">
                    <p>All objects count: {{ workflow_metadata.counter_initial }}</p>
                    <p>Finished objects count: {{ workflow_metadata.counter_finished }}</p>
                    <p>Halted objects count: {{ workflow_metadata.counter_halted }}</p>
                    <p>Error objects count: {{ workflow_metadata.counter_error }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-7">
           Error message
           <div class="well">
                <div class="workflow_message">
                    <p>{{ workflow_metadata.error_msg }}</p>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        Log:
        <pre>{{ log }}</pre>
    </div>

{% endblock %}
